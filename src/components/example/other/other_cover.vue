<template>
  <div>
    <div id="map"></div>
    <div class="control"></div>
  </div>
</template>

<script>
import "ol/ol.css";
import { Map, View } from "ol";
import * as olProj from "ol/proj";
import * as olExtent from "ol/extent";
import TileLayer from "ol/layer/Tile";
import WMTS from "ol/source/WMTS";
import WMTSTileGrid from "ol/tilegrid/WMTS";

import VectorLayer from "ol/layer/Vector";
import VectorSource from "ol/source/Vector";
import GeoJSON from "ol/format/GeoJSON";
import Style from "ol/style/Style";
import Fill from "ol/style/Fill";

import * as turf from "@turf/turf";

export default {
  name: "Base",
  data() {
    return {
      map: {},
      data: {
        type: "FeatureCollection",
        features: [
          {
            type: "Feature",
            geometry: {
              type: "Polygon",
              coordinates: [
                [
                  [13079301.340700008, 4958608.399500005],
                  [13079439.710899998, 4958628.496000007],
                  [13079541.234300002, 4959748.685400002],
                  [13079648.212299995, 4959987.820500001],
                  [13079650.438700002, 4960216.104500003],
                  [13079642.757599998, 4960537.1197],
                  [13079642.312300004, 4960545.189199999],
                  [13079642.312300004, 4960556.780000001],
                  [13079618.0447, 4960857.705200009],
                  [13079649.882100005, 4961063.26690001],
                  [13080036.383299999, 4961341.0242],
                  [13080054.194500003, 4961354.083200008],
                  [13080046.958700005, 4961652.244999997],
                  [13080046.179500006, 4961658.994800001],
                  [13080043.9531, 4961667.212000005],
                  [13080036.383299999, 4961685.11370001],
                  [13080016.457200002, 4961705.656800002],
                  [13079962.467200007, 4963081.11150001],
                  [13079961.242700003, 4963115.452600002],
                  [13079955.23140001, 4963185.162600003],
                  [13079833.002599996, 4963295.232000001],
                  [13079300.450200006, 4963765.315499999],
                  [13078767.118500005, 4964248.778100006],
                  [13077081.184799999, 4964662.250100009],
                  [13075378.88720001, 4964078.961800009],
                  [13074291.295699999, 4964644.93],
                  [13073775.441199996, 4964916.624000005],
                  [13072082.271800004, 4965433.612000011],
                  [13070472.035300002, 4965931.5434000045],
                  [13068870.2592, 4965928.6074],
                  [13067135.901499998, 4965546.789300002],
                  [13066127.013000008, 4965127.702100001],
                  [13065586.890800003, 4964903.70700001],
                  [13065377.9441, 4964821.508199997],
                  [13063939.585000008, 4964241.733000003],
                  [13062187.082199998, 4964115.214400001],
                  [13061354.3011, 4963299.047799997],
                  [13061131.7735, 4963080.5244999975],
                  [13061131.7735, 4963074.947700001],
                  [13061129.324400008, 4962589.341900006],
                  [13059885.885700002, 4962180.066299997],
                  [13058261.62300001, 4961978.736600004],
                  [13058054.791400008, 4961978.002899997],
                  [13056161.358200006, 4962101.852399997],
                  [13054652.9791, 4963043.688600011],
                  [13054616.020999998, 4963086.688299999],
                  [13054431.230700012, 4963300.5154],
                  [13053573.068700008, 4964291.636299998],
                  [13053348.871300008, 4964550.697499998],
                  [13053307.6831, 4964597.666900009],
                  [13052774.240100011, 4965210.784200005],
                  [13052284.656900004, 4965111.849100001],
                  [13052210.7408, 4965086.0145],
                  [13051489.279200003, 4964835.159000002],
                  [13050619.206, 4964532.7905],
                  [13049433.096900001, 4965729.5493],
                  [13047967.241799999, 4966555.9016999975],
                  [13046613.485500008, 4967189.843099996],
                  [13044934.008300003, 4967385.260400005],
                  [13044040.558100004, 4967610.340099998],
                  [13043559.769200008, 4967017.186200008],
                  [13042223.044799995, 4967831.901200004],
                  [13041950.423300005, 4967855.83420001],
                  [13041782.664900012, 4967870.370200001],
                  [13040636.964699998, 4967531.935999997],
                  [13038883.571400013, 4967673.621799998],
                  [13038294.134599999, 4967824.119300008],
                  [13037553.971399996, 4968011.473499998],
                  [13037313.632600006, 4968073.1426],
                  [13036653.7306, 4967930.716900006],
                  [13036119.953700006, 4968976.933399998],
                  [13034358.879300002, 4968765.184800006],
                  [13033006.347500004, 4968259.327],
                  [13032785.15570001, 4968304.845800005],
                  [13032031.411399998, 4968179.302500002],
                  [13031050.909300007, 4968019.842900008],
                  [13029186.641800001, 4968008.39010001],
                  [13027686.8343, 4967271.915000007],
                  [13027562.379100006, 4967112.76380001],
                  [13027099.846700005, 4966816.050600007],
                  [13025856.074000012, 4967277.494100004],
                  [13024388.103900004, 4967464.544299997],
                  [13024175.372299999, 4967490.3851],
                  [13023687.459000003, 4967751.5864999965],
                  [13022469.178500004, 4968385.311800003],
                  [13020863.951400008, 4968886.623999998],
                  [13019785.376900006, 4969379.003900006],
                  [13019945.009000003, 4970006.079000011],
                  [13018817.565200001, 4971341.721500002],
                  [13018456.222199999, 4971600.969499998],
                  [13017578.0227, 4972120.2206000015],
                  [13017287.924100008, 4972900.103800006],
                  [13017136.306899995, 4973830.345299996],
                  [13016288.275100004, 4974286.9777000025],
                  [13015526.070500005, 4974567.1677],
                  [13015269.145100001, 4975342.544100001],
                  [13015203.8006, 4975536.214100011],
                  [13015166.397200003, 4975648.332900003],
                  [13015716.760799997, 4976297.853600003],
                  [13015377.458999995, 4977216.661200009],
                  [13015205.025100004, 4978820.666600004],
                  [13013385.508000005, 4979275.32720001],
                  [13012371.276100006, 4979300.4641999975],
                  [13012307.156100009, 4979416.301299997],
                  [13011981.546600007, 4980004.915800005],
                  [13012148.859800007, 4981778.765300006],
                  [13011919.541700002, 4982043.877999999],
                  [13011061.379700009, 4982836.171099998],
                  [13010685.119800009, 4982478.396100007],
                  [13010442.220700007, 4982208.419100009],
                  [13010164.478600003, 4982202.096199997],
                  [13010123.735600002, 4982407.372000009],
                  [13009886.4025, 4982532.657000005],
                  [13009786.994199999, 4982493.395000011],
                  [13009513.148200002, 4982388.697000004],
                  [13009235.851400007, 4981731.419200003],
                  [13008586.079500012, 4981730.5370000005],
                  [13008400.955200005, 4981542.478500009],
                  [13008873.1725, 4980593.124700002],
                  [13008688.382100001, 4980252.485600002],
                  [13008428.1171, 4980080.038699999],
                  [13008167.406900007, 4980062.838300005],
                  [13008084.139899999, 4980058.281000011],
                  [13007794.931900006, 4979739.7114999965],
                  [13007426.798300002, 4979566.2447],
                  [13007148.610900007, 4979566.2447],
                  [13006948.23580001, 4978995.002100006],
                  [13005987.659899998, 4978526.243600003],
                  [13005522.233200006, 4978523.5978000015],
                  [13005429.6153, 4978194.348499998],
                  [13005647.912900005, 4977305.4309000075],
                  [13005886.025300004, 4977147.439000003],
                  [13005863.5387, 4976772.0898],
                  [13005644.0167, 4976560.613200009],
                  [13005595.704000007, 4976207.329600006],
                  [13005247.496699996, 4975799.541000009],
                  [13004812.571400013, 4975325.645900011],
                  [13004600.730400007, 4975095.098700002],
                  [13003855.891700007, 4975092.747800007],
                  [13003351.837000005, 4975324.029600002],
                  [13003345.491800006, 4975325.792800002],
                  [13003337.810800001, 4975324.029600002],
                  [13002792.567900002, 4975104.061900005],
                  [13002167.954300009, 4974699.111100011],
                  [13001344.857900009, 4974707.045400001],
                  [13000559.721600007, 4975224.257400006],
                  [13000483.245100006, 4975318.445799999],
                  [12999761.0042, 4976205.125300005],
                  [12999506.639200006, 4975946.930699997],
                  [12999412.796900004, 4975317.8581000045],
                  [12999398.325300008, 4975222.641099997],
                  [12999631.4283, 4974564.963800006],
                  [12999957.928400002, 4973674.025700003],
                  [12999958.373700008, 4973251.064200006],
                  [13000284.539800007, 4972782.434200004],
                  [13000332.963800002, 4970624.675900005],
                  [13000349.10510001, 4969944.10400001],
                  [13000148.730000008, 4969492.520700008],
                  [13000104.870099999, 4968512.179200001],
                  [12999828.018599998, 4968039.958700009],
                  [12999043.216200005, 4967876.096500002],
                  [12998656.826200001, 4967825.2939000055],
                  [12998333.331800003, 4967870.810699999],
                  [12997869.5748, 4968246.258700006],
                  [12997591.498700008, 4968199.125],
                  [12997033.454100009, 4968667.829000011],
                  [12996729.774500005, 4968676.05210001],
                  [12996265.683499996, 4968513.941299997],
                  [12996013.433600005, 4968009.564700007],
                  [12995864.3768, 4967997.37780001],
                  [12995563.368900012, 4967969.626800008],
                  [12995322.139500007, 4967258.9949000105],
                  [12994904.691400006, 4967258.260799997],
                  [12994398.521700002, 4966697.279700004],
                  [12993842.146899998, 4966414.966200009],
                  [12993192.9316, 4966367.25410001],
                  [12992916.85930001, 4966181.693000004],
                  [12992823.907500006, 4965524.770300008],
                  [12992381.412500005, 4965312.068899997],
                  [12991886.597400002, 4964798.610100001],
                  [12991576.238700006, 4964399.810099997],
                  [12991670.971600007, 4963838.112300009],
                  [12991589.374399997, 4963096.227500007],
                  [12991583.029199999, 4963036.791000009],
                  [12991571.563200008, 4962691.626700006],
                  [12991381.31820001, 4962223.942599997],
                  [12991364.731600009, 4961462.9582],
                  [12991394.453899998, 4960812.954599999],
                  [12991390.669100009, 4960188.2289],
                  [12991385.548400003, 4959456.009600006],
                  [12991189.4034, 4958946.378500007],
                  [12990704.050500002, 4958209.704800002],
                  [12990444.119400006, 4958028.112000003],
                  [12990489.983100004, 4957613.159999996],
                  [12990614.438300006, 4957358.682499997],
                  [12990669.986700002, 4957244.573100008],
                  [12990775.406300008, 4956958.132000007],
                  [12990729.987900004, 4956255.778300002],
                  [12990190.199700002, 4956224.540899999],
                  [12990000.399999999, 4955960.8605],
                  [12990000.845200006, 4955627.5304000005],
                  [12990295.953200005, 4955557.727600008],
                  [12990326.1208, 4955255.058900006],
                  [12990645.496400006, 4955103.874700002],
                  [12990784.757099997, 4954869.991000004],
                  [12990958.860800002, 4954501.653800011],
                  [12990890.065300006, 4954121.307400003],
                  [12990757.149900012, 4953822.641800001],
                  [12990884.944599997, 4953489.237800002],
                  [12991232.818000004, 4953355.087700002],
                  [12991262.0951, 4952865.565399997],
                  [12991123.613600004, 4952695.653099999],
                  [12991089.2159, 4952408.905199997],
                  [12991199.6448, 4952157.641200006],
                  [12991159.347200003, 4951905.943900004],
                  [12991205.990000002, 4951631.239100009],
                  [12991432.3026, 4951251.004100002],
                  [12991523.695900004, 4950881.190499999],
                  [12991817.802000005, 4949671.882000007],
                  [12991609.411899995, 4948936.051600009],
                  [12991342.690400008, 4948632.561499998],
                  [12991117.268400006, 4948351.6472999975],
                  [12990822.494399998, 4947889.482600011],
                  [12990324.785000008, 4947859.737199999],
                  [12989994.054699998, 4947846.403100006],
                  [12989797.019200008, 4948085.6875],
                  [12989472.522899996, 4948097.116999999],
                  [12989192.331799999, 4947906.773100004],
                  [12988452.613800008, 4947860.616400011],
                  [12988074.684100006, 4947747.496699996],
                  [12988030.9355, 4947608.4432],
                  [12988010.898000002, 4947545.437600002],
                  [12988034.275100008, 4947307.04550001],
                  [12987646.5493, 4946903.242700011],
                  [12987448.734600011, 4946993.7892],
                  [12986984.5323, 4946993.056600004],
                  [12986451.645900004, 4946804.63880001],
                  [12986312.719200004, 4946429.865099996],
                  [12986313.16450001, 4946160.441299997],
                  [12986314.389000002, 4946009.836800002],
                  [12986522.890399996, 4945963.249499999],
                  [12986684.303600006, 4946312.806200005],
                  [12986962.045800004, 4946500.628600009],
                  [12987286.875999998, 4946501.068100005],
                  [12987642.653099995, 4946500.189000003],
                  [12987700.8732, 4946499.749499999],
                  [12987712.339100007, 4946292.588400006],
                  [12987759.093300004, 4946105.502600007],
                  [12988164.184999999, 4946029.907499999],
                  [12988506.047100008, 4946001.486199997],
                  [12989099.714000002, 4945841.215200007],
                  [12989847.001699999, 4945566.973200001],
                  [12990316.769899998, 4945323.941400006],
                  [12990630.579600003, 4945051.471700005],
                  [12990520.929899998, 4944729.645000011],
                  [12990666.647100005, 4944215.505800001],
                  [12991025.5411, 4943583.781400003],
                  [12991489.632100005, 4942977.4344],
                  [12991725.295499995, 4942788.507900007],
                  [12991941.477899998, 4942306.542000011],
                  [12991941.477899998, 4942223.946800008],
                  [12991941.811900001, 4942095.808399998],
                  [12991689.228000008, 4942004.135600008],
                  [12991480.726499997, 4941769.831800006],
                  [12991388.554000009, 4941535.680200003],
                  [12991388.220000003, 4940972.6554000005],
                  [12991017.860100005, 4940668.093600005],
                  [12990781.751500007, 4940502.9314000085],
                  [12990532.061800003, 4940224.299699999],
                  [12990369.758000009, 4939937.623300001],
                  [12990190.199700002, 4939356.2434],
                  [12989899.321899999, 4938685.452000007],
                  [12989865.703400005, 4938607.279000007],
                  [12989912.457600001, 4938162.699800007],
                  [12990052.163500004, 4937882.085199997],
                  [12990007.190400004, 4937625.630599998],
                  [12989719.652200006, 4937443.247400008],
                  [12989450.927000001, 4937227.3488000035],
                  [12989430.889400005, 4936795.712099999],
                  [12989552.7843, 4936579.8276999965],
                  [12989831.417, 4936352.385799997],
                  [12990263.6706, 4935919.031400003],
                  [12990514.5847, 4935609.796900004],
                  [12990515.030000005, 4935493.013300002],
                  [12990329.460400008, 4935469.598200008],
                  [12989962.1061, 4935707.995700009],
                  [12989799.468300004, 4935895.17620001],
                  [12989545.214600008, 4935964.253900006],
                  [12989379.459800009, 4935727.020900011],
                  [12989383.355999999, 4935192.5726],
                  [12989523.952500008, 4934748.148000002],
                  [12989602.544100001, 4934314.7179000005],
                  [12989598.6479, 4933999.534699999],
                  [12989783.772200003, 4933912.034400009],
                  [12990131.200399999, 4933929.885600001],
                  [12990344.711100005, 4933639.003300011],
                  [12990692.918499999, 4933050.241700001],
                  [12990843.7564, 4932764.506100006],
                  [12991318.868000008, 4932490.190099999],
                  [12991614.421300001, 4932426.54990001],
                  [12991935.911899999, 4932460.930200003],
                  [12992033.984400008, 4932805.471199997],
                  [12992421.7102, 4932759.385399997],
                  [12992673.514899999, 4932383.538099997],
                  [12992673.960200004, 4931939.386800006],
                  [12992611.0647, 4931872.678000003],
                  [12992518.558200005, 4931872.678000003],
                  [12992463.343700007, 4931936.7535],
                  [12992388.203000009, 4931860.097099997],
                  [12992562.306700002, 4931685.281600006],
                  [12992498.520599995, 4931568.3983],
                  [12992859.084499996, 4931026.4233000055],
                  [12992862.535400007, 4930993.6570999995],
                  [12992894.3728, 4930740.307599999],
                  [12993015.376999997, 4930263.027999997],
                  [12992995.784800008, 4930003.261800006],
                  [12992781.828800008, 4929822.190100007],
                  [12992769.917599998, 4929601.924900003],
                  [12993093.078100003, 4929530.40550001],
                  [12993049.329500008, 4929299.0315999985],
                  [12992864.205200005, 4929275.192500003],
                  [12992678.190300003, 4929438.8499],
                  [12992584.348000001, 4929601.632399999],
                  [12992451.877799999, 4929813.268300004],
                  [12992166.454600006, 4929811.805700004],
                  [12992166.8999, 4929577.792500004],
                  [12992528.799600005, 4929291.572800003],
                  [12992818.341500007, 4928831.181600004],
                  [12992806.430400006, 4928487.511000007],
                  [12992795.855, 4928175.1467999965],
                  [12992851.0695, 4927702.232200004],
                  [12992951.257, 4926954.009000003],
                  [12992983.984900009, 4926492.703700006],
                  [12993039.199400008, 4926363.308200002],
                  [12993279.538200002, 4926368.425499998],
                  [12993409.002799999, 4926491.534000002],
                  [12993690.195799995, 4926759.5417000055],
                  [12994117.328700002, 4926774.455600001],
                  [12994117.328700002, 4926564.347199999],
                  [12994035.3975, 4926491.534000002],
                  [12993932.2044, 4926400.445299998],
                  [12994001.890400007, 4926236.838500008],
                  [12994214.6219, 4926232.306100011],
                  [12994379.820000011, 4926031.127700008],
                  [12994556.484099995, 4925930.978600003],
                  [12994788.251299996, 4926117.973099999],
                  [12994915.712100007, 4925970.453299999],
                  [12994765.319400001, 4925791.941299997],
                  [12993863.854200006, 4925347.502800003],
                  [12993307.590700008, 4925113.30340001],
                  [12992963.168200001, 4925115.057700001],
                  [12992870.661700007, 4924858.497400001],
                  [12992851.0695, 4924601.943700008],
                  [12992732.180300009, 4924484.413699999],
                  [12992500.301800009, 4924484.121300004],
                  [12992373.842800003, 4924400.798700005],
                  [12992214.989900004, 4924167.35270001],
                  [12991954.724900004, 4924010.2146999985],
                  [12991778.060900003, 4924120.138000004],
                  [12991510.782800008, 4924425.356800005],
                  [12991308.292700004, 4924340.572899997],
                  [12991294.266399998, 4924136.3635000065],
                  [12991598.725200001, 4923972.209600009],
                  [12991659.394300003, 4923834.661700003],
                  [12991679.877100006, 4923639.525200009],
                  [12991173.596099995, 4923311.967699997],
                  [12990934.593099996, 4922978.136200003],
                  [12990972.775700003, 4922762.555000007],
                  [12991227.140700001, 4922757.001100004],
                  [12991389.444600005, 4922911.634400003],
                  [12991597.500700012, 4923025.784000002],
                  [12991848.080900002, 4922904.618800007],
                  [12991825.482999995, 4922592.4318],
                  [12991601.2856, 4922102.8325999975],
                  [12991601.730800007, 4921728.99970001],
                  [12991924.557400007, 4921494.1558],
                  [12991899.3992, 4921207.878899999],
                  [12991534.159899998, 4920911.819700003],
                  [12991123.1683, 4920552.498200007],
                  [12991161.350900006, 4920216.276299998],
                  [12991218.235200003, 4920124.076700002],
                  [12991329.999999996, 4919943.917300008],
                  [12991745.333000008, 4919656.224299997],
                  [12992197.067499995, 4919615.752100006],
                  [12992515.552500002, 4919505.440899998],
                  [12992350.354400009, 4918583.403700009],
                  [12993205.176800001, 4918425.916600004],
                  [12993165.213100009, 4917720.469200008],
                  [12993495.609300002, 4917528.667600006],
                  [12993455.757000007, 4917027.196199998],
                  [12993344.437500007, 4916286.940800004],
                  [12993225.2143, 4915827.303500004],
                  [12992997.1206, 4915729.302900009],
                  [12993003.465900011, 4915233.910899997],
                  [12993741.180100001, 4915215.947600007],
                  [12993747.080100007, 4914971.1822],
                  [12993725.038800009, 4914884.581100002],
                  [12993726.263299998, 4914760.887400009],
                  [12993747.5253, 4914668.738799997],
                  [12993805.300199997, 4914642.744599998],
                  [12993941.22130001, 4914688.0154],
                  [12994048.199299999, 4914712.987499997],
                  [12994152.1717, 4914765.70660001],
                  [12994324.605600007, 4914846.319100007],
                  [12994497.8187, 4914914.665000007],
                  [12994572.959399994, 4914939.3456000015],
                  [12994640.530300003, 4914974.541100003],
                  [12994686.727900006, 4914996.155000009],
                  [12994941.9835, 4914741.610600002],
                  [12995202.693700008, 4914551.765299998],
                  [12995380.693600003, 4914315.924199998],
                  [12995500.362000003, 4914149.159500003],
                  [12995517.839200005, 4914156.314900003],
                  [12995610.3457, 4914196.326499999],
                  [12995619.696500003, 4914200.415300004],
                  [12995632.943600006, 4914206.402400009],
                  [12995844.7845, 4914302.635499999],
                  [12995852.465600003, 4914292.997599997],
                  [12995870.276700009, 4914259.848900005],
                  [12995995.065900005, 4913963.706400007],
                  [12996204.903100006, 4913656.621300004],
                  [12996633.37180001, 4913250.4016999975],
                  [12996912.338499997, 4912933.556199998],
                  [12997086.887400012, 4912811.055000007],
                  [12997247.855399996, 4912568.977399997],
                  [12997347.263700001, 4912426.624499999],
                  [12997471.718900003, 4912248.649800003],
                  [12997594.39300001, 4912093.891800001],
                  [12997787.198300008, 4911882.636399999],
                  [12997836.4016, 4911846.722000003],
                  [12997977.443300005, 4911743.7973000035],
                  [12998109.023000006, 4911655.034600005],
                  [12998083.530800011, 4911610.94560001],
                  [12997912.432800006, 4911506.5634],
                  [12997717.957600001, 4911417.511000007],
                  [12997613.8739, 4911277.072500005],
                  [12997385.000999998, 4911095.322999999],
                  [12997369.305, 4911082.768600009],
                  [12997211.342600003, 4910854.0173999965],
                  [12997071.6367, 4910712.565200001],
                  [12996929.8156, 4910551.846300006],
                  [12996585.393100005, 4910185.604000002],
                  [12996323.792299997, 4909992.197300002],
                  [12996080.113899998, 4909676.3323],
                  [12995871.167300008, 4909496.509700008],
                  [12995719.104800005, 4909365.877700008],
                  [12995385.369000003, 4908993.841400005],
                  [12995299.207700007, 4908802.793300003],
                  [12995210.820000008, 4908537.317000002],
                  [12995158.9452, 4908168.814400002],
                  [12995107.181600008, 4907905.252400011],
                  [12994985.2868, 4907694.5244999975],
                  [12994794.262500007, 4907414.4853000045],
                  [12994570.844300006, 4907126.865900002],
                  [12994787.472, 4907017.423900008],
                  [12994591.661000002, 4906629.717200011],
                  [12994584.425300002, 4906526.555100001],
                  [12994583.20080001, 4906510.212700002],
                  [12994579.861200001, 4906467.459800005],
                  [12994573.404600002, 4906405.154900007],
                  [12994588.321500003, 4906352.480499998],
                  [12994603.12690001, 4906322.42270001],
                  [12994629.954899997, 4906311.625200003],
                  [12994649.881100006, 4906303.454200007],
                  [12994657.116900004, 4906300.535999998],
                  [12994685.503400002, 4906289.009000003],
                  [12994711.440800004, 4906285.361199997],
                  [12994915.712100007, 4906303.1624],
                  [12995123.768199995, 4906408.073100001],
                  [12995197.684300002, 4906375.096900001],
                  [12995228.631200012, 4906360.943400003],
                  [12995561.5878, 4906212.2601],
                  [12995871.167300008, 4906073.354800008],
                  [12996481.754700009, 4905796.863200009],
                  [12996841.427899998, 4905212.8276999965],
                  [12997548.974600006, 4904814.396100007],
                  [12997908.647900008, 4905121.205900006],
                  [12998047.574600007, 4904981.732500002],
                  [12998047.018, 4904609.27790001],
                  [12998232.253700003, 4904655.961600006],
                  [12998472.5924, 4904853.348600008],
                  [12999017.724000007, 4905308.681299999],
                  [12998971.081099998, 4905634.765500009],
                  [12999156.205400005, 4905774.68590001],
                  [12999387.638699997, 4905771.330100007],
                  [12999434.3928, 4905573.487099998],
                  [12999608.051199995, 4905608.357400008],
                  [12999572.317699999, 4906380.641599998],
                  [12999988.541300006, 4906846.988700002],
                  [13000088.2835, 4907970.339600004],
                  [13000219.9745, 4908047.1022000015],
                  [13000331.1827, 4907949.616700001],
                  [13000435.711700011, 4907781.500299998],
                  [13000554.600900002, 4907648.556100011],
                  [13000763.881499995, 4907713.203800008],
                  [13000799.615100008, 4907766.615100004],
                  [13000875.201000009, 4907827.761200011],
                  [13000938.430500008, 4907862.785400003],
                  [13000989.860100005, 4907890.512900002],
                  [13001039.063299999, 4907919.845899999],
                  [13001112.534200013, 4907983.3279],
                  [13001149.047000006, 4908034.551600009],
                  [13001183.444699999, 4908094.240000002],
                  [13001657.8884, 4907921.597099997],
                  [13002192.110599998, 4907622.726300001],
                  [13002429.4437, 4907605.652400009],
                  [13002442.579400007, 4907968.442400008],
                  [13002685.478600007, 4907966.1074],
                  [13002686.814399999, 4907843.376100004],
                  [13002651.192200001, 4907331.744599998],
                  [13002803.588599999, 4906939.21010001],
                  [13003033.685900003, 4906946.360299997],
                  [13003349.276700005, 4906958.325800009],
                  [13003711.510300007, 4906781.325200006],
                  [13003847.320100002, 4906877.340000004],
                  [13003618.447200004, 4907066.307899997],
                  [13003496.663699996, 4907284.464500003],
                  [13003881.383900002, 4907415.506700009],
                  [13004112.817099996, 4907462.203700006],
                  [13004140.758300003, 4908225.147],
                  [13004529.819900006, 4909327.199300006],
                  [13004620.3226, 4909700.269900009],
                  [13004573.568499997, 4909886.518600009],
                  [13004665.741000004, 4910306.0288999975],
                  [13004989.680700008, 4910400.1804000065],
                  [13005266.9776, 4910819.712500006],
                  [13005591.028600007, 4911053.134300001],
                  [13006611.383100003, 4911242.912100002],
                  [13007078.034400009, 4910874.454499997],
                  [13007448.394300006, 4909687.133400008],
                  [13007497.5975, 4909093.2346000075],
                  [13007851.370900009, 4908443.913100004],
                  [13008193.233000007, 4908267.615600005],
                  [13009121.97150001, 4908270.534400001],
                  [13009353.73870001, 4908110.147200003],
                  [13009387.357200004, 4906957.158400007],
                  [13009494.780500002, 4906454.911300011],
                  [13009794.563900001, 4906034.105700001],
                  [13009960.652600009, 4905806.055200003],
                  [13009914.7889, 4905377.544700004],
                  [13009794.563900001, 4905220.414200008],
                  [13009748.7003, 4905160.013800003],
                  [13009760.611400004, 4904818.626800001],
                  [13009794.563900001, 4904788.573700003],
                  [13010286.818700004, 4904359.086199999],
                  [13010449.456500001, 4904030.418300003],
                  [13010522.482000012, 4903549.909000002],
                  [13011003.604899999, 4903071.465099998],
                  [13011082.196400005, 4902766.17750001],
                  [13011300.827900004, 4902178.237400003],
                  [13011307.618400007, 4902160.443700008],
                  [13011695.78950001, 4901648.523400001],
                  [13011862.991400007, 4900801.798299998],
                  [13012352.24050001, 4900747.403800011],
                  [13012677.516100004, 4900504.8928999975],
                  [13012683.861300003, 4900223.307700001],
                  [13012685.197099999, 4900175.478399999],
                  [13012286.3394, 4900178.686500005],
                  [13011962.844900005, 4899806.121399999],
                  [13011971.750499997, 4899639.601800002],
                  [13012298.695800006, 4899619.479699999],
                  [13012573.877599996, 4899276.534599997],
                  [13013168.435000006, 4899237.020900004],
                  [13013342.093400002, 4899077.217799999],
                  [13013389.6268, 4898312.502800003],
                  [13013887.78160001, 4897990.305100001],
                  [13014085.707599998, 4897991.908799998],
                  [13014177.880200002, 4898192.515800007],
                  [13014397.847500004, 4898189.891500011],
                  [13014438.590399995, 4898056.0559],
                  [13014980.048400007, 4897966.687400006],
                  [13015329.9256, 4898231.733700007],
                  [13015391.040000007, 4898880.383700006],
                  [13015992.276500005, 4899300.1554000005],
                  [13016509.132900007, 4899304.529700004],
                  [13016649.729500003, 4899602.41960001],
                  [13017241.726500005, 4899614.522000007],
                  [13017611.529900003, 4899987.225700006],
                  [13017842.963100001, 4900266.908399999],
                  [13018302.378600013, 4900311.238399997],
                  [13018786.061799996, 4899730.881100006],
                  [13018900.386900004, 4899593.233499996],
                  [13019362.362800006, 4899912.858800001],
                  [13019686.859100007, 4900448.750200011],
                  [13020426.577100001, 4901148.1504999995],
                  [13020767.994000003, 4901447.117000006],
                  [13020941.652400002, 4901832.870000005],
                  [13020701.758900002, 4902173.278500006],
                  [13020228.317100003, 4902494.154200003],
                  [13019788.382499997, 4902424.14410001],
                  [13019317.835, 4902432.020200007],
                  [13019120.354200006, 4902752.174999997],
                  [13018668.5084, 4902926.186099999],
                  [13018205.308000002, 4903289.971000008],
                  [13018354.698800009, 4903926.991599999],
                  [13018665.9481, 4904314.592100009],
                  [13019342.4366, 4905016.16300001],
                  [13019405.66610001, 4905433.277700007],
                  [13019725.932299998, 4905850.556000002],
                  [13020049.983300004, 4905850.993699998],
                  [13020420.231900003, 4906037.6074],
                  [13020436.818500001, 4906639.493600011],
                  [13020533.109900009, 4906865.374499999],
                  [13020690.293000009, 4906966.059600003],
                  [13021091.154500011, 4906978.317000002],
                  [13021397.7284, 4907089.217700005],
                  [13021756.177099999, 4907468.186800003],
                  [13022513.706300009, 4907464.97640001],
                  [13022750.705500007, 4907668.548699997],
                  [13022674.674299996, 4907782.521800004],
                  [13022646.2878, 4907825.572200008],
                  [13022657.753700007, 4907977.052600004],
                  [13022860.243799996, 4908033.384100005],
                  [13023051.379400007, 4908040.097200006],
                  [13023155.351799995, 4907921.013300002],
                  [13023227.5982, 4908051.918100007],
                  [13023332.0158, 4908051.918100007],
                  [13023468.382200003, 4907950.3464],
                  [13023691.243800007, 4908062.717500009],
                  [13023708.721000005, 4908187.202799998],
                  [13023933.809000004, 4908410.930000007],
                  [13023994.923399996, 4908471.496299997],
                  [13024002.047900006, 4908826.728800006],
                  [13023781.746599998, 4909054.265299998],
                  [13023873.807799999, 4909380.473400004],
                  [13024333.779900003, 4909939.795700006],
                  [13024749.892199997, 4910359.600200005],
                  [13024518.459000003, 4911011.96760001],
                  [13024286.246500008, 4911429.335900001],
                  [13024285.356000006, 4911941.61810001],
                  [13024701.913500007, 4912361.6538999975],
                  [13024746.107299995, 4913154.324900001],
                  [13025324.968700003, 4913377.8728],
                  [13025699.447500005, 4914313.149700008],
                  [13025756.776999999, 4914455.3838],
                  [13026311.704700004, 4914829.086600006],
                  [13026677.389200002, 4915209.6677],
                  [13026734.718700007, 4915269.107500002],
                  [13026816.204599999, 4915354.5436],
                  [13027670.693000004, 4916245.752200007],
                  [13028368.443600003, 4916064.641400002],
                  [13029548.875499997, 4915766.546000004],
                  [13029897.973400008, 4915245.010200001],
                  [13030183.2852, 4914815.6511999965],
                  [13031010.500400007, 4915325.334600009],
                  [13031612.293500002, 4915512.565899998],
                  [13031842.836199995, 4916024.329999998],
                  [13032163.436300006, 4916161.476800002],
                  [13032996.551400006, 4916581.83860001],
                  [13033849.370000001, 4917466.5847999975],
                  [13034048.0753, 4917607.695799999],
                  [13034565.710900001, 4918119.714900002],
                  [13034932.620000001, 4917885.687500007],
                  [13035210.362100001, 4917886.125700004],
                  [13035597.642600004, 4917864.943800002],
                  [13035721.986500006, 4917326.352300003],
                  [13036139.434600007, 4917101.984400004],
                  [13036624.787600003, 4917184.076700002],
                  [13037017.967999998, 4917374.703100011],
                  [13037559.092100006, 4917717.109399997],
                  [13037759.021899998, 4917843.323600009],
                  [13039192.7056, 4918360.175900005],
                  [13039331.186999995, 4918685.523400001],
                  [13039793.1629, 4919385.926200002],
                  [13040024.596099999, 4919571.335300006],
                  [13040256.029400006, 4919571.627500005],
                  [13040443.714000009, 4919761.861700006],
                  [13040536.331800006, 4919901.982799999],
                  [13040675.147200007, 4919901.982799999],
                  [13040770.325399999, 4919998.271600008],
                  [13040952.4441, 4920182.230999999],
                  [13041045.061900008, 4920228.988499999],
                  [13041416.201100003, 4919902.713400006],
                  [13041790.679900005, 4919907.0967999995],
                  [13042161.039800003, 4920000.755500011],
                  [13042438.781900007, 4920280.860399999],
                  [13042670.2152, 4920281.298799999],
                  [13043318.985100009, 4920473.154000007],
                  [13043596.727299996, 4920706.804600008],
                  [13043966.975900006, 4920846.939200006],
                  [13044383.9787, 4920707.5352],
                  [13044522.9054, 4920661.067699999],
                  [13045500.067899998, 4920664.428500004],
                  [13045778.255300004, 4920245.499800004],
                  [13046336.63390001, 4920156.3684000075],
                  [13046916.274499997, 4920198.011700004],
                  [13047633.505999997, 4920813.9146],
                  [13048559.238899995, 4920457.519100003],
                  [13048860.69200001, 4921105.73300001],
                  [13049112.941999998, 4921990.739699997],
                  [13049117.172100008, 4922005.646399997],
                  [13049855.66560001, 4922500.5022],
                  [13050017.8581, 4923200.299500011],
                  [13050419.164900009, 4923219.885200001],
                  [13050343.579000004, 4923858.049100004],
                  [13049541.4107, 4924615.246299997],
                  [13049736.665100005, 4926482.0304000005],
                  [13049733.770800002, 4926491.241600007],
                  [13049973.664300002, 4926675.322499998],
                  [13050385.657700002, 4926992.318000004],
                  [13050457.013500009, 4927076.6862],
                  [13051492.730100002, 4928304.127400011],
                  [13052267.179800004, 4928412.197600007],
                  [13052990.4225, 4930070.689200006],
                  [13052210.40680001, 4930754.203700006],
                  [13051491.839500003, 4931380.861299999],
                  [13051307.494399995, 4931541.92050001],
                  [13049798.670100007, 4932518.279700004],
                  [13049918.5612, 4934128.152800001],
                  [13048809.707700003, 4935455.841800004],
                  [13049070.863200001, 4935921.519299999],
                  [13048362.6486, 4937134.111299999],
                  [13047827.535800003, 4937946.639000006],
                  [13046959.132500008, 4938185.243000001],
                  [13047060.544499997, 4938663.20040001],
                  [13047103.9591, 4938867.126300007],
                  [13047037.278800007, 4939635.436100006],
                  [13047074.682100002, 4939723.719500005],
                  [13047080.248100005, 4939735.285700001],
                  [13047453.391000003, 4940507.763300009],
                  [13049618.6664, 4940596.933000006],
                  [13050263.3176, 4941218.215100005],
                  [13051206.527699996, 4940444.803199999],
                  [13051490.949000001, 4940655.208500005],
                  [13052211.631299999, 4941185.561300002],
                  [13052636.760500003, 4941499.071599998],
                  [13052210.7408, 4942526.506500006],
                  [13051544.048399996, 4944140.950499997],
                  [13051620.970100008, 4944296.506600007],
                  [13051855.409000006, 4944778.130700007],
                  [13051551.729400005, 4945529.031099997],
                  [13051491.839500003, 4945674.3544000015],
                  [13051463.00780001, 4945745.991400011],
                  [13051491.839500003, 4945768.6985],
                  [13052211.186100006, 4946326.577800006],
                  [13053284.751200002, 4947162.284100011],
                  [13054929.385400008, 4947687.274100006],
                  [13056616.877599996, 4948484.996300004],
                  [13057907.961, 4949534.120200001],
                  [13058220.434799999, 4949866.070699997],
                  [13059247.245800007, 4949950.9287],
                  [13060874.068799999, 4949834.4140000045],
                  [13062633.807400007, 4950345.916400008],
                  [13064401.226899996, 4949731.6770000085],
                  [13065380.50450001, 4948569.695800006],
                  [13065512.529400006, 4948403.081700005],
                  [13066125.343199998, 4948080.412300006],
                  [13066980.944800004, 4947628.517200001],
                  [13067464.961899996, 4948502.287799999],
                  [13068269.690499999, 4948819.402400002],
                  [13068599.641499996, 4949478.283299997],
                  [13069626.118500002, 4949086.114900008],
                  [13070374.742100004, 4948721.658500008],
                  [13071078.392600007, 4949367.929399997],
                  [13071492.835100003, 4950203.455200009],
                  [13070748.441599999, 4950672.324600011],
                  [13070719.609900005, 4950842.641599998],
                  [13070680.5367, 4951074.523700006],
                  [13070438.973400004, 4952505.952900007],
                  [13069678.327399999, 4954225.996500008],
                  [13070198.968600001, 4955976.112100005],
                  [13070435.967799999, 4957890.086099997],
                  [13070659.274700012, 4958814.940900005],
                  [13070955.273200009, 4958961.341400005],
                  [13070970.96930001, 4958968.822899997],
                  [13071510.757499997, 4959260.457199998],
                  [13073454.395799994, 4959397.035400011],
                  [13074605.1054, 4959706.727300011],
                  [13075223.373800006, 4959874.560700007],
                  [13076174.153600007, 4960190.136200011],
                  [13076963.965400007, 4958500.436399996],
                  [13078723.815200005, 4958540.629100002],
                  [13079301.340700008, 4958608.399500005],
                ],
              ],
            },
            properties: {
              OBJECTID_1: 1,
              OBJECTID: 14,
              NAME: "密云区",
              KIND: "0137",
              Shape_Leng: 3.20224792066,
              Shape_Le_1: 400092.881072,
              Shape_Area: 3851982535.46,
            },
          },
        ],
      },
    };
  },
  mounted() {
    this.map = new Map({
      target: "map",
      layers: [],
      view: new View({
        projection: "EPSG:3857",
        center: olProj.fromLonLat([116.83112, 40.3705]),
        zoom: 9,
      }),
    });
    //t0~t7
    let url = "https://t0.tianditu.gov.cn/img_w/wmts?tk=21c1e34286caecc25fd94be94bfbe119";
    let proj = "EPSG:900913";
    let level = 18;
    let layerName = "img"; //vec矢量|img影像|cva注记
    let format = "tiles";
    let tileSize = [256, 256];
    let matrixSet = "w"; //w球面墨卡托投影|c经纬度投影

    let projection = olProj.get(proj);
    let projectionExtent = projection.getExtent();
    let size = olExtent.getWidth(projectionExtent) / 256;
    let resolutions = new Array(level);
    let matrixIds = new Array(level);
    for (let z = 0; z < level; z++) {
      resolutions[z] = size / Math.pow(2, z);
      matrixIds[z] = z;
    }

    let TDTLayer = new TileLayer({
      source: new WMTS({
        url: url,
        layer: layerName,
        matrixSet: matrixSet,
        format: format,
        projection: projection,
        tileGrid: new WMTSTileGrid({
          origin: olExtent.getTopLeft(projectionExtent),
          resolutions: resolutions,
          matrixIds: matrixIds,
          tileSize: tileSize,
        }),
        zIndex: 1,
      }),
    });
    this.map.addLayer(TDTLayer);
    this.addCoverLayer();
  },
  methods: {
    addCoverLayer() {
      //经纬度转换墨卡托投影坐标
      let xy1 = olProj.fromLonLat([-180, -90]);
      let xy2 = olProj.fromLonLat([180, 90]);
      let xy3 = olProj.fromLonLat([180, -90]);
      let xy4 = olProj.fromLonLat([-180, 90]);
      let boundCoord = [
        [
          [xy1[0], xy1[1]],
          [xy3[0], xy3[1]],
          [xy2[0], xy2[1]],
          [xy4[0], xy4[1]],
          [xy1[0], xy1[1]],
        ],
      ];
      let zoneCoord = this.data.features[0].geometry.coordinates; //区县坐标（3857坐标,是Polygon而不是MultiPolygon）
      //构造遮罩
      let boundGeo = turf.polygon(boundCoord);
      let zoneGeo = turf.polygon(zoneCoord);
      let json = turf.difference(boundGeo, zoneGeo); //裁剪第二个多边形来找到两个多边形之间的差异
      //添加图层
      let features = new GeoJSON().readFeatures(json);
      let vectorLayer = new VectorLayer({
        renderMode: "image", //image, vector
        source: new VectorSource({
          features: features,
        }),
        style: new Style({
          fill: new Fill({
            color: "rgba(0, 0, 0, 0.8)",
          }),
        }),
        zIndex: 2,
      });
      this.map.addLayer(vectorLayer);
    },
  },
};
</script>

<style>
/*隐藏ol的一些自带元素*/
.ol-attribution,
.ol-zoom {
  display: none;
}

.control {
  position: absolute;
  z-index: 10;
  left: 10px;
  top: 10px;
}
</style>
